name: Deploy MkDocs Site

on:
  push:
    branches:
      - main

permissions:
  contents: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # 1. Install uv (The Tool Manager)
      - name: Install uv
        uses: astral-sh/setup-uv@v5

      # 2. Set up Python using uv
      - name: Set up Python
        run: uv python install 3.13

      # 3. Install ONLY the docs dependencies (Fast)
      - name: Install dependencies
        run: uv sync --only-group docs

      # 4. Deploy using uv to run mkdocs
      - name: Deploy to GitHub Pages
        run: uv run mkdocs gh-deploy --force
